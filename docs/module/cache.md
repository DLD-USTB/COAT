## Cache原理与设计

如果你曾有心观察过TinyMIPS的仿真波形，你或许会发现，TinyMIPS执行一条指令的周期其实远远长于五个周期。这是因为TinyMIPS通过AXI接口访问内存时，会需要耗费多个周期的时间，等待存储器响应访存请求。面对这种需要多周期才能返回的访存操作，当处理器发出的访存请求尚未被接受时，处理器采用的策略是进行暂停。因而，在TinyMIPS的运行过程当中有大量的时间会耗费在因为访存而引起的暂停上。

在真实处理器中，CPU对存储的访问也会耗费大量的时间。CPU运行的太快，存储器访问的太慢，因而存储器成为了制约处理器发展的关键路径。对此，计算机科学家们提出了两种主要的方案，缓存和预取。

预取策略是提前发出访存请求，通过此种方式可以一定程度上隐藏访存的时延，然而对于我们的TinyMIPS来说，预取实现的效果有限：访存时延相较于指令执行时间长得多。

缓存策略则是将一部分的数据项存入CPU上的高速存储单元上，这些访问速度更快，往往很短的时钟周期就可以获取到数据，存储单元中存储了CPU经常使用的数据项。对于TinyMIPS来说，实现缓存可以很大程度上提升处理器的性能。

现代的处理器中，往往是两种策略同时使用，尽可能将CPU访问存储器的成本降低。

